# 徽章頁面 (MedalPage) 功能說明

## 概述
徽章頁面是一個展示用戶收集的徽章的頁面，連結到 Firebase Cloud Firestore 的"徽章"集合。

## 主要功能

### 1. 徽章列表顯示
- 從 Firebase 的"徽章"集合讀取徽章數據
- 以網格形式展示徽章
- 每個徽章卡片顯示：
  - 徽章圖片
  - 徽章名稱
  - 稀有度標籤（右上角）

### 2. 篩選功能
- 全部：顯示所有徽章
- 已獲得：只顯示已獲得的徽章
- 未獲得：只顯示未獲得的徽章

### 3. 徽章詳情查看
- 點擊徽章圖片可放大查看詳情
- 詳情頁面顯示：
  - 大圖展示
  - 徽章名稱
  - 稀有度
  - 達成條件

### 4. 視覺效果
- 已獲得的徽章：正常顏色顯示，帶有金色邊框和發光效果
- 未獲得的徽章：灰色調顯示
- 稀有度顏色編碼：
  - 傳說：紫色
  - 史詩：橙色
  - 稀有：藍色
  - 普通：綠色

### 5. 特效系統
當稀有度為"稀有"且已達成時，會顯示不同的特效動畫：

#### 稀有徽章特效（藍色）
- 閃爍特效：8個藍色光點圍繞徽章旋轉閃爍
- 發光特效：藍色光暈效果，強度會呼吸式變化

#### 史詩徽章特效（橙色）
- 脈衝特效：橙色邊框會放大縮小
- 旋轉光環：橙色光環圍繞徽章旋轉

#### 傳說徽章特效（紫色）
- 多重特效組合：
  - 閃爍特效：紫色光點閃爍
  - 發光特效：強烈的紫色光暈
  - 脈衝特效：紫色邊框脈衝
  - 旋轉光環：紫色光環旋轉

## 技術實現

### Firebase 數據結構
徽章集合中的每個文檔應包含以下字段：
```json
{
  "name": "徽章名稱",
  "圖片": "圖片URL",
  "imageUrl": "圖片URL（備用）",
  "稀有度": "傳說/史詩/稀有/普通",
  "rarity": "稀有度（備用）",
  "達成條件": "獲得該徽章的條件描述",
  "requirement": "達成條件（備用）",
  "status": "已獲得/未獲得"
}
```

### 等級限制
- 需要用戶等級達到 11 級才能訪問徽章頁面
- 在聊天頁面的菜單中，如果等級不足會顯示鎖定狀態

### 導航
- 從聊天頁面的菜單中點擊"勳章"按鈕進入
- 頁面頂部有返回按鈕可返回上一頁

## 使用方式

1. 在聊天頁面點擊菜單按鈕
2. 選擇"勳章"選項（需要等級11）
3. 瀏覽徽章列表
4. 使用篩選器查看不同類型的徽章
5. 點擊徽章查看詳情

## 錯誤處理
- 網路錯誤時顯示錯誤訊息
- 圖片載入失敗時顯示預設圖標
- Firebase 連接失敗時顯示適當的錯誤提示

## 測試
包含基本的 Widget 測試，確保頁面能正常構建和顯示。
