# TODO List

## ✅ 已完成

### 基礎功能
- [x] 修復所有編譯錯誤和警告
- [x] 修復字符編碼問題
- [x] 修復 API 使用問題 (withValues vs withOpacity)
- [x] 修復 BuildContext 跨 async gap 問題
- [x] 修復語法錯誤

### 商城功能
- [x] 連接 store_page 到 Firebase "主題桌鋪" 集合
- [x] 修復主題桌鋪圖片顯示問題
- [x] 實現購買系統 - 直接更新 Firebase 中商品的 "狀態" 欄位
- [x] 修復 store_page 中頭像圖片顯示位置問題（顯示臉部而非胸口）

### 主題背景系統
- [x] 創建 ThemeBackgroundService 管理主題背景
- [x] 創建 ThemeBackgroundWidget 和 ThemeBackgroundListener
- [x] 實現全局主題背景通知系統 (ThemeBackgroundNotifier)
- [x] 在所有頁面 (chat_page, pet_page, store_page, challenge_page, medal_page) 應用主題背景
- [x] 實現主題背景的即時同步更新

### 頭像系統
- [x] 實現頭像選擇和顯示功能
- [x] 修復 chat_page 中頭像圖片顯示位置問題（顯示臉部而非胸口）
- [x] 修復 store_page 中頭像圖片顯示位置問題（顯示臉部而非胸口）
- [x] 修復 pet_page 中頭像圖片顯示位置問題（顯示臉部而非胸口）

### 頁面優化
- [x] 將 challenge_page 的黑色 AppBar 改為藍色
- [x] 移除 challenge_page 頂部的黑色空間，使其與 medal_page 一致
- [x] 為 store_page 添加一致的主題背景
- [x] 將 pet_page 背包設計改為 chat_page 底部選單模式，節省空間
- [x] 為 pet_page 的所有類別（特效、頭像、主題桌布、飼料）添加綠色邊框選擇狀態
- [x] 實現 pet_page 中主題桌布選擇的即時背景同步更新
- [x] 恢復 pet_page 背包為原本的格式，實現跳出頁面模式
- [x] 重新設計 pet_page 背包佈局：刪除"更多"選項，重新排列為上面3個（造型、特效、飼料）和下面2個（頭像、主題桌布），添加隱形按鈕實現選單展開/收起功能

### 功能解鎖系統
- [x] 實現基於等級的功能解鎖系統
- [x] 實現挑戰任務功能
- [x] 實現經驗值系統

## 🔄 進行中

## 📋 待完成

### 測試建議
- [ ] 測試所有頁面的主題背景同步更新功能
- [ ] 測試 pet_page 中所有類別的選擇狀態顯示
- [ ] 測試頭像在所有頁面的正確顯示
- [ ] 測試商城購買流程的完整性
- [ ] 測試功能解鎖系統的等級要求
- [ ] 測試 pet_page 背包的跳出頁面功能
- [ ] 測試 pet_page 背包的隱形按鈕展開/收起功能

### 優化建議
- [ ] 考慮添加主題背景的預覽功能
- [ ] 考慮添加更多的主題背景選項
- [ ] 考慮優化圖片載入性能
- [ ] 考慮添加主題背景的收藏功能
- [ ] 考慮為背包分類添加數量顯示
- [ ] 考慮添加背包分類的動畫效果

### 新功能建議
- [ ] 考慮添加主題背景的動畫效果
- [ ] 考慮添加主題背景的季節性推薦
- [ ] 考慮添加主題背景的用戶評分系統
- [ ] 考慮添加背包分類的快速操作功能
- [ ] 考慮添加背包分類的搜索功能
