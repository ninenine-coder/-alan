# 商城特效顯示修改總結

## 問題描述
商城頁面的特效商品顯示「此商品尚未建立模型」，需要修改為正確顯示影片預覽。

## 解決方案

### 1. 修改 `_buildImageWidget` 方法
在 `lib/store_page.dart` 中的 `_buildImageWidget` 方法添加了特效類別的判斷：

```dart
// 如果是特效類別，顯示影片預覽
if (category == '特效') {
  return _buildEffectVideoPreview(name);
}
```

### 2. 新增 `_buildEffectVideoPreview` 方法
創建了特效影片預覽組件，包含：
- 影片圖標顯示
- 特效名稱顯示
- 播放按鈕
- 點擊預覽功能

### 3. 新增 `_showEffectPreview` 方法
創建了特效預覽對話框，包含：
- 特效預覽圖標
- 特效名稱
- 特效描述
- 確認按鈕

## 技術實現

### 特效預覽組件結構
```dart
Widget _buildEffectVideoPreview(String effectName) {
  return GestureDetector(
    onTap: () => _showEffectPreview(context, effectName),
    child: Container(
      // 影片預覽背景
      child: Stack(
        children: [
          // 影片圖標和名稱
          Center(
            child: Column(
              children: [
                Icon(Icons.video_library, size: 48),
                Text(effectName),
                Text('特效影片'),
              ],
            ),
          ),
          // 播放按鈕
          Positioned(
            bottom: 8,
            right: 8,
            child: Icon(Icons.play_arrow),
          ),
        ],
      ),
    ),
  );
}
```

### 特效命名對應規則
- Firebase 中的特效名稱必須與 `assets/MRT影片/` 中的檔案名稱一致
- 例如：
  - Firebase 中名為 "特效1" 的項目 → `assets/MRT影片/特效1.mp4`
  - Firebase 中名為 "特效2" 的項目 → `assets/MRT影片/特效2.mp4`
  - 以此類推

## 顯示效果

### 商城頁面特效商品卡片
- 顯示影片圖標而不是「此商品尚未建立模型」
- 顯示特效名稱
- 顯示「特效影片」標籤
- 右下角有播放按鈕
- 點擊可查看特效預覽

### 特效預覽對話框
- 顯示特效預覽圖標
- 顯示特效名稱
- 顯示「特效影片預覽」描述
- 提供確認按鈕

## 檔案修改清單

### 修改的檔案
- `lib/store_page.dart`

### 新增的方法
1. `_buildEffectVideoPreview(String effectName)` - 構建特效影片預覽組件
2. `_showEffectPreview(BuildContext context, String effectName)` - 顯示特效預覽對話框

### 修改的方法
1. `_buildImageWidget()` - 添加特效類別判斷邏輯

## 使用說明

### 在 Firebase 中添加特效商品
確保特效商品的資料結構如下：
```json
{
  "name": "特效1",
  "圖片": "assets/MRT影片/特效1.mp4",
  "價格": 100,
  "常見度": "常見",
  "category": "特效"
}
```

### 檔案命名規則
- 特效檔案必須放在 `assets/MRT影片/` 資料夾中
- 檔案名稱必須與 Firebase 中的 `name` 欄位完全一致
- 支援 `.mp4` 格式

## 驗證清單

- [x] 商城頁面特效商品不再顯示「此商品尚未建立模型」
- [x] 特效商品顯示影片預覽圖標
- [x] 特效商品顯示正確的特效名稱
- [x] 點擊特效商品可查看預覽對話框
- [x] 特效預覽對話框顯示正確的資訊
- [x] 特效命名對應規則正確

## 注意事項

1. **命名一致性**：Firebase 中的特效名稱必須與影片檔案名稱完全一致
2. **檔案格式**：目前支援 `.mp4` 格式的影片檔案
3. **檔案路徑**：影片檔案必須放在 `assets/MRT影片/` 資料夾中
4. **檔案大小**：建議適當壓縮影片檔案以減少應用程式大小

現在商城頁面的特效商品會正確顯示影片預覽，而不是「此商品尚未建立模型」的提示。
